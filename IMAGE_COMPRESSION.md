# å›¾ç‰‡å‹ç¼©å·¥å…·ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½ç‰¹æ€§

âœ… **æ™ºèƒ½å‹ç¼©**ï¼šåªå‹ç¼©å¤§äº 100KB çš„å›¾ç‰‡
âœ… **é¿å…é‡å¤**ï¼šè‡ªåŠ¨è®°å½•å·²å‹ç¼©çš„å›¾ç‰‡ï¼Œä¸ä¼šé‡å¤å‹ç¼©
âœ… **ç»Ÿä¸€å°ºå¯¸**ï¼šå°†è¿‡å¤§å›¾ç‰‡è°ƒæ•´åˆ°æœ€å¤§å®½åº¦ 800pxï¼ˆé€‚åˆå¤´åƒï¼‰
âœ… **é«˜è´¨é‡**ï¼šJPEG è´¨é‡ 80ï¼Œä¿æŒæ¸…æ™°åº¦
âœ… **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•æ¯å¼ å›¾ç‰‡çš„å‹ç¼©æƒ…å†µå’ŒèŠ‚çœç©ºé—´
âœ… **å®‰å…¨å¯é **ï¼šåªæœ‰å‹ç¼©åæ›´å°æ‰ä¼šæ›¿æ¢åŸæ–‡ä»¶

## å®‰è£…ä¾èµ–

é¦–æ¬¡ä½¿ç”¨éœ€è¦å®‰è£… sharp å›¾ç‰‡å¤„ç†åº“ï¼š

```bash
npm install
```

## ä½¿ç”¨æ–¹æ³•

### å‹ç¼©æ‰€æœ‰å›¾ç‰‡
```bash
npm run compress-images
```

### å·¥å…·ä¼šè‡ªåŠ¨ï¼š
1. æ‰«æ `public/img` ç›®å½•ä¸‹æ‰€æœ‰ `.jpg`ã€`.jpeg`ã€`.png` å›¾ç‰‡
2. è·³è¿‡å°äº 100KB çš„å›¾ç‰‡
3. è·³è¿‡å·²ç»å‹ç¼©è¿‡çš„å›¾ç‰‡ï¼ˆè®°å½•åœ¨ `.image-compression-log.json`ï¼‰
4. å‹ç¼©å¤§å›¾ç‰‡ï¼š
   - å®½åº¦è¶…è¿‡ 800px çš„è°ƒæ•´åˆ° 800px
   - JPEG è´¨é‡è®¾ç½®ä¸º 80
   - PNG ä½¿ç”¨æœ€å¤§å‹ç¼©çº§åˆ«
5. åªæœ‰å‹ç¼©åæ›´å°æ‰æ›¿æ¢åŸæ–‡ä»¶
6. æ˜¾ç¤ºè¯¦ç»†çš„å‹ç¼©æŠ¥å‘Š

## è¾“å‡ºç¤ºä¾‹

```
ğŸ–¼ï¸  Image Compression Tool

ğŸ“ Scanning directory: ./public/img
ğŸ“ Target max width: 800px
ğŸ¯ JPEG quality: 80
ğŸ“¦ Min size to compress: 100.0 KB

ğŸ“‹ Loaded compression log (0 files previously compressed)

ğŸ” Found 21 images

â­ï¸  Skipped (too small): public/img/placeholder.png (6.2 KB)
âœ… Compressed: public/img/people/liumugeng.jpg
   2.7 MB â†’ 156.3 KB (saved 94.2%)
âœ… Compressed: public/img/people/jizhe.jpg
   1.6 MB â†’ 142.8 KB (saved 91.1%)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š Compression Summary
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Total images scanned: 21
âœ… Compressed: 15
â­ï¸  Skipped: 6
âŒ Errors: 0

ğŸ’¾ Total space saved: 8.2 MB (88.5%)
   Before: 9.3 MB
   After: 1.1 MB

âœ¨ Done! Compression log saved to: .image-compression-log.json
```

## å‹ç¼©è®°å½•

å·¥å…·ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ `.image-compression-log.json` æ–‡ä»¶ï¼Œè®°å½•ï¼š
- æ¯å¼ å›¾ç‰‡çš„å‹ç¼©ä¿¡æ¯
- åŸå§‹å¤§å°å’Œå‹ç¼©åå¤§å°
- èŠ‚çœçš„ç™¾åˆ†æ¯”
- å‹ç¼©æ—¶é—´æˆ³

ç¤ºä¾‹ï¼š
```json
{
  "compressed": {
    "public/img/people/liumugeng.jpg": {
      "originalSize": 2831360,
      "compressedSize": 160051,
      "savedPercentage": 94.3,
      "timestamp": "2026-02-09T00:30:45.123Z"
    }
  },
  "lastRun": "2026-02-09T00:30:45.789Z"
}
```

## é…ç½®å‚æ•°

åœ¨ `compress-images.js` ä¸­å¯ä»¥è°ƒæ•´ï¼š

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `TARGET_MAX_WIDTH` | 800 | å›¾ç‰‡æœ€å¤§å®½åº¦ï¼ˆåƒç´ ï¼‰ |
| `QUALITY` | 80 | JPEG å‹ç¼©è´¨é‡ï¼ˆ1-100ï¼‰ |
| `MIN_SIZE_TO_COMPRESS` | 100KB | æœ€å°å‹ç¼©æ–‡ä»¶å¤§å° |

## é‡æ–°å‹ç¼©æ‰€æœ‰å›¾ç‰‡

å¦‚æœéœ€è¦ç”¨æ–°å‚æ•°é‡æ–°å‹ç¼©æ‰€æœ‰å›¾ç‰‡ï¼š
```bash
# åˆ é™¤å‹ç¼©è®°å½•
rm .image-compression-log.json

# é‡æ–°è¿è¡Œå‹ç¼©
npm run compress-images
```

## æ³¨æ„äº‹é¡¹

âš ï¸ **åŸæ–‡ä»¶ä¼šè¢«è¦†ç›–**ï¼šå‹ç¼©ä¼šç›´æ¥æ›¿æ¢åŸå›¾ç‰‡ï¼Œå»ºè®®å…ˆæäº¤åˆ° Git
âš ï¸ **sharp åº“ä¾èµ–**ï¼šéœ€è¦ç¼–è¯‘åŸç”Ÿæ¨¡å—ï¼Œé¦–æ¬¡å®‰è£…å¯èƒ½è¾ƒæ…¢
âš ï¸ **æ¸è¿›å¼è¿è¡Œ**ï¼šå¯ä»¥å¤šæ¬¡è¿è¡Œï¼Œåªä¼šå¤„ç†æ–°å¢çš„å›¾ç‰‡

## ä¸éƒ¨ç½²æµç¨‹é›†æˆ

å»ºè®®åœ¨éƒ¨ç½²å‰è¿è¡Œå‹ç¼©ï¼š
```bash
npm run compress-images    # å‹ç¼©å›¾ç‰‡
./deploy.sh                # æ„å»ºå¹¶éƒ¨ç½²
```
